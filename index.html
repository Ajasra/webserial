<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSerial ‚ú®</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
    <link rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/default.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>
</head>
<body class="container">
    <h1 id="webserial">WebSerial</h1>

    <p>
        WebSerial is a minimal <a href="https://electronjs.org/">Electron</a> application to bring Serial communication to Web browsers through websockets.
    </p>

    <hr>

    <h2 id="concept">Concept</h2>
    
    <p>
        <a href="https://wicg.github.io/webusb/">WebUSB</a> is an awesome way to connect physical devices and microcontrollers to Web browsers but is limited to a <a href="https://github.com/webusb/arduino#compatible-hardware">very little set of devices</a> for now.
    </p>

    <p>
        WebSerial brings a really simple way to connect your browser to any device with Serial communication and hack into tangible web.
    </p>

    <p>
        WebSerial provides two ways communication between Serial deveices and browsers through websockets transport: <em>any Serial data is forwarded to your page, and the same in the other direction</em>.
    </p>

    <p>
        WebSerial uses <a href="https://serialport.io/">serialport</a> to open a Serial connection, and runs an <a href="https://expressjs.com/">express</a> / <a href="https://socket.io/">socket.io</a> websocket server to communicate with your web page in realtime.<br><em>Server runs on port 8135</em>.
    </p>

    <hr>

    <h2 id="how-to-use-webserial">How to use WebSerial</h2>

    <p>
        Download the <a href="https://github.com/makio135/webserial/releases">latest release</a> for your OS.<br>Start the application.<br>Connect your microcontroller.<br>Select the <code>port</code> and <code>baudrate</code> for your device, and click <code>connect</code>.<br>On your web page, add the link to this script:
    </p>

    <pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://makio135.com/webserial/client/webserial.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>

    <p>
        You now have access to a global <code>webserial</code> Object.
    </p>

    <hr>

    <h2 id="documentation">Documentation</h2>

    <p>
        The <code>webserial</code> Object exposes a few methods and properties:
    </p>

    <ul>
        <li><code>.on(eventType, callback)</code>, valid event types are:
            <ul>
                <li><code>&#39;connection&#39;</code>: no argument is passed to the callback</li>
                <li><code>&#39;disconnection&#39;</code>: no argument is passed to the callback</li>
                <li><code>&#39;data&#39;</code>: callback takes one argument, the data received</li>
            </ul>
        </li>
        <li><code>.write(dataString)</code>: method use to send data to the microcontrolller</li>
    </ul>

    <pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://makio135.com/webserial/webserial.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        webserial.on(<span class="hljs-string">'connection'</span>, () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Device connected'</span>))
        webserial.on(<span class="hljs-string">'disconnection'</span>, () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Device disconnected'</span>))
        webserial.on(<span class="hljs-string">'data'</span>, data =&gt; <span class="hljs-built_in">console</span>.log(data))
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre>

    <p>Or for use in a more direct mode:</p>

    <ul>
        <li><code>.isConnected</code>: state of the connection with the Serial device (Boolean)</li>
        <li><code>.data</code>: last data received from the device (String)</li>
    </ul>

    <pre><code class="lang-html"><span class="hljs-comment">&lt;!-- Example using p5js https://p5js.org/ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://makio135.com/webserial/webserial.min.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/p5@0.10.2/lib/p5.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
            createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>)
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">if</span>(webserial.isConnected) {
                text(webserial.data, <span class="hljs-number">5</span>, <span class="hljs-number">15</span>)
            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre>

    <hr>

    <h2 id="acknowledgments">Acknowledgments</h2>
    
    <p>
        WebSerial would not be possible without these great projects:
    </p>

    <ul>
        <li><a href="https://electronjs.org/">electron</a></li>
        <li><a href="https://www.electron.build/">electron-builder</a></li>
        <li><a href="https://serialport.io/">serialport</a></li>
        <li><a href="https://expressjs.com/">express</a></li>
        <li><a href="https://socket.io/">socket.io</a></li>
    </ul>

    <p>üôèüôèüôè</p>

    <p style="text-align:right;"><a href="https://twitter.com/makio135">@Makio135</a></p>

    <script src="http://makio135.com/webserial/client/webserial.min.js"></script>
    <script>
        webserial.on('connection', () => console.log('Device connected'))
        webserial.on('disconnection', () => console.log('Device disconnected'))
        webserial.on('data', data => console.log(data))
    </script>
</body>
</html>